[package]
name = "zasan"
version.workspace = true
edition.workspace = true
rust-version.workspace = true

[lib]
crate-type = ["staticlib"]

[features]
default = ["single-threaded"]
## Support single-threaded targets by using dummy synchronization primitives
single-threaded = ["dep:nospin", "asan/single-threaded"]
test = ["asan/test"]

[dependencies]
asan = { path = "../asan", default-features = false, features = [
  "dlmalloc",
  "global_allocator",
  "guest",
  "hooks",
  "host",
  "linux",
  "single-threaded",
  "tracking",
] }
log = { version = "0.4.22", default-features = false, features = [
  "release_max_level_info",
] }
nospin = { version = "0.2.4", default-features = false, optional = true, features = [
  "lazy",
  "mutex",
  "once",
] }
spin = { version = "0.9.8", default-features = false, features = [
  "lazy",
  "mutex",
  "spin_mutex",
] }

[package]
name = "libafl_qemu_sys"
version = "0.12.0"
authors = ["Andrea Fioraldi <andreafioraldi@gmail.com>"]
description = "C to Rust bindings for the LibAFL QEMU bridge"
documentation = "https://docs.rs/libafl_qemu_sys"
repository = "https://github.com/AFLplusplus/LibAFL/"
readme = "../../README.md"
license = "MIT OR Apache-2.0"
keywords = ["fuzzing", "qemu", "instrumentation"]
edition = "2021"
categories = ["development-tools::testing", "emulators", "embedded", "os", "no-std"]

[package.metadata.docs.rs]
features = ["x86_64", "usermode"]
rustdoc-args = ["--cfg", "docsrs"]

[features]
# The following architecture features are mutually exclusive.
x86_64 = [] # build qemu for x86_64 (default)
i386 = [] # build qemu for i386
arm = [] # build qemu for arm
aarch64 = [] # build qemu for aarch64
mips = [] # build qemu for mips (el, use with the 'be' feature of mips be)
ppc = [] # build qemu for powerpc
hexagon = [] # build qemu for hexagon

be = []

usermode = []
systemmode = []

python = ["pyo3", "pyo3-build-config"]

slirp = [ "systemmode", "libafl_qemu_build/slirp" ] # build qemu with host libslirp (for user networking)
shared = [ "libafl_qemu_build/shared" ]

clippy = [ "libafl_qemu_build/clippy" ] # special feature for clippy, don't use in normal projects

[dependencies]
paste = "1"
num_enum = "0.7"
libc = "0.2"
strum = "0.25"
strum_macros = "0.25"
pyo3 = { version = "0.18", optional = true }

[build-dependencies]
libafl_qemu_build = { path = "../libafl_qemu_build", version = "0.12.0" }
pyo3-build-config = { version = "0.18", optional = true }
